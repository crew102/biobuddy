## Python: S3 Utilities (`inst/python/s3.py`)

High-level helpers for S3 used via reticulate from R.

### Bucket discovery

- **`get_catchall_bucket_name()`**: Returns the single bucket matching `ec2-spot-catchall` pattern.

### File operations

- **`download_file_from_s3(bucket_name, remote_path, local_path)`**
- **`upload_file_to_s3(bucket_name, remote_path, local_path)`**

### Directory operations

- **`download_dir_from_s3(bucket_name, remote_dir, local_dir)`**
- **`upload_dir_to_s3(bucket_name, remote_dir, local_dir)`**

### Listing and deletion

- **`list_files_in_s3(bucket_name, remote_dir)`** → `list[str]`
- **`delete_s3_path(bucket_name, remote_dir)`**: Deletes all keys under prefix.

### Backup and ACL

- **`backup_s3_bucket(source_bucket_name, backup_bucket_prefix)`** → returns created backup bucket name.
- **`delete_old_catchall_buckets()`**: Deletes dev catch-all buckets older than 5 days.
- **`make_imgs_readable(bucket_name)`**: Attaches a read-only bucket policy for `db/img/*`.

Examples:

```python
from inst.python import s3

buck = s3.get_catchall_bucket_name()
s3.upload_file_to_s3(buck, "logs/test.txt", "/tmp/test.txt")
files = s3.list_files_in_s3(buck, "logs/")
```

